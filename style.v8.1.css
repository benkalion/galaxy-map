
:root{
  --bg1:#081a3a; --bg2:#0b2858; --bg3:#071633;
  --panel:#0a1f46e6; --text:#e9f1ff; --muted:#a9bde0;
  /* For HTML elements only (not canvas) */
  --deep:#ffe88a; --core:#ff89c6; --colonies:#ffb370; --inner:#d990ff;
  --exp:#6bf0d8; --mid:#7fb7ff; --outer:#6580ff; --unk:#c59cff;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:radial-gradient(1200px 900px at 20% -10%, var(--bg2) 0%, var(--bg1) 45%, var(--bg3) 80%) fixed;color:var(--text);font:15px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Cantarell,Helvetica,Arial}
.hdr{position:fixed;top:12px;left:16px;right:16px;z-index:20;display:flex;gap:12px;align-items:center}
.brand{display:flex;flex-direction:column;font-weight:800;letter-spacing:.08em}
.brand .sw{font-size:16px}
.brand .sub{font-size:12px;color:var(--muted);margin-top:-2px}
.controls{margin-left:auto;display:flex;gap:8px;align-items:center;background:linear-gradient(180deg,#0d2a5c,#0b234c);padding:8px 10px;border-radius:10px;border:1px solid #12396c;backdrop-filter:blur(6px)}
.controls input,.controls select,.controls button{background:#0a2148;border:1px solid #1b3e74;color:var(--text);padding:8px 10px;border-radius:8px}
.controls input{min-width:220px}
.controls button{cursor:pointer}
#reset{opacity:.8}
.wrap{position:fixed;inset:0;overflow:hidden}
#map{position:absolute;inset:0;width:100%;height:100%}
#coords{position:fixed;right:12px;bottom:12px;opacity:.85;font-size:12px;color:var(--muted);z-index:15}
#legend{position:fixed;left:12px;bottom:12px;z-index:15;background:var(--panel);padding:10px 12px;border-radius:12px;border:1px solid #1b3f78;backdrop-filter:blur(6px)}
.legend-row{display:flex;gap:12px;align-items:center;margin:2px 0}
.swatch{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:6px;box-shadow:0 0 10px rgba(255,255,255,.18)}
.swatch.deepcore{background:var(--deep)} .swatch.core{background:var(--core)}
.swatch.colonies{background:var(--colonies)} .swatch.inner{background:var(--inner)}
.swatch.exp{background:var(--exp)} .swatch.mid{background:var(--mid)}
.swatch.outer{background:var(--outer)} .swatch.unk{background:var(--unk)}
#routesBar{position:fixed;left:50%;transform:translateX(-50%);bottom:12px;z-index:15;display:flex;gap:8px;flex-wrap:wrap;max-width:80vw;justify-content:center}
.routeTag{background:#0a2148;border:1px solid #2b4d86;border-radius:100px;padding:6px 10px;color:var(--text);cursor:pointer}
.routeTag.active{box-shadow:0 0 12px rgba(255,255,255,.15),0 0 0 1px #fff inset}

/* Edge labels pinned to edges, never inside canvas */
#edgeLabels{position:fixed;inset:0;pointer-events:none;z-index:12;display:grid;grid-template-columns:1fr auto 1fr;grid-template-rows:1fr auto 1fr}
.edge{color:#8fb6ff;font-size:12px;user-select:none}
.top,.bottom{grid-column:1/4;display:flex;justify-content:space-between;padding:0 18vw}
.left,.right{grid-row:1/4;display:flex;flex-direction:column;justify-content:space-between;padding:18vh 0;align-items:center}

/* Datapad popup */
dialog{border:none;background:transparent}
.datapad{width:min(460px,92vw);background:#091e41f0;border:1px solid #58f1ff;border-radius:14px;box-shadow:0 10px 50px rgba(0,0,0,.5),0 0 20px #00ffe64d;overflow:hidden}
.dHead{display:flex;align-items:center;justify-content:space-between;background:linear-gradient(180deg,#0c2a5a,#07224a);border-bottom:1px solid #1a4378;padding:10px 12px;color:#e9f1ff}
.dHead h3{margin:0;font-size:20px}
.aure{font-family:monospace;color:#8fe8ff;letter-spacing:.2em;font-size:10px;opacity:.8;display:block}
.tag{font-size:11px;padding:2px 8px;border-radius:100px;border:1px solid #2b5d9a;margin-left:6px;background:#0a2a5c;color:#e9f1ff}
.dBody{padding:12px 14px;max-height:62vh;overflow:auto;color:#e9f1ff}
.meta{display:grid;grid-template-columns:1fr 1fr;gap:6px 10px;color:#cbe2ff;margin-bottom:6px}
blockquote{margin:8px 0;padding:6px 10px;border-left:3px solid #58f1ff;color:#eaf7ff;font-style:italic}
cite{display:block;margin-top:4px;color:#bcd7ff;font-size:12px}
.notes{color:#d7e7ff}
.btn{background:#123a76;border:1px solid #2a5db0;color:#e6f3ff;border-radius:7px;padding:6px 10px;cursor:pointer}
.panel{position:fixed;right:10px;top:70px;bottom:10px;width:320px;background:var(--panel);border:1px solid #1b3f78;border-radius:14px;backdrop-filter: blur(6px);overflow:auto;z-index:16}
.panel .head{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid #163a65}
.list{list-style:none;margin:0;padding:8px 12px}
.list li{padding:6px 0;border-bottom:1px dotted #1b3e74;cursor:pointer}
footer small{position:fixed;left:12px;bottom:48px;opacity:.6;z-index:15}
@media (max-width:760px){ .controls input{min-width:150px} }
