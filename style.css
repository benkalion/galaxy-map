*{box-sizing:border-box}
:root{
  --ink:#eaf3ff; --muted:#9bb3d1; --grid:#2a3953;
  --bg0:#020b1d; --bg1:#06183f; --bg2:#05163a;
  --deep:#ffffff88; --core:#ffe2977a; --colon:#ffaf6c66; --inner:#ff8fd47a; --exp:#98ffd77a; --mid:#7ecfff6e; --outer:#9ac6ff5d; --unk:#e0b5ff66;
  --glow:#6ed0ff;
}
html,body{height:100%;margin:0;color:var(--ink);font:15px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:radial-gradient(1200px 900px at 60% 12%, #0e2672 0%, #0a1f57 50%, #081844 78%, #040e2d 100%)}
header{display:flex;align-items:center;gap:.8rem;padding:.6rem .8rem;border-bottom:1px solid #0f2a62;background:linear-gradient(180deg,#0f2a62,#0b204e)}
.brand{display:flex;flex-direction:column}
.brand .sw{font-weight:900;letter-spacing:.12em}
.brand .sub{opacity:.8;font-size:.72rem;letter-spacing:.22em}
.controls{margin-left:auto;display:flex;gap:.5rem;align-items:center}
.controls input,.controls select,.controls button{background:#0a1f4d;color:var(--ink);border:1px solid #1d3e7c;padding:.5rem .6rem;border-radius:.5rem}
.controls input{min-width:220px}

main{display:grid;grid-template-columns:1fr auto;min-height:calc(100% - 56px)}
.wrap{position:relative;overflow:hidden}
#map{display:block;width:100%;height:calc(100vh - 96px)}
#gridOverlay{position:absolute;inset:0;pointer-events:none;background:
  linear-gradient(to right, rgba(170,190,220,.18) 1px, transparent 1px) 0 0/ calc(100%/18) 100%,
  linear-gradient(to bottom, rgba(170,190,220,.18) 1px, transparent 1px) 0 0/ 100% calc(100%/21);
  box-shadow: inset 0 0 0 1px rgba(160,180,210,.25);
}
#legend{position:absolute;left:10px;bottom:10px;background:rgba(6,20,50,.6);border:1px solid #16386f;border-radius:.5rem;padding:.45rem .6rem;display:grid;gap:.2rem .8rem;backdrop-filter:blur(2px)}
.legend-row{display:grid;grid-template-columns:auto 1fr auto 1fr;gap:.25rem .6rem}
.swatch{width:.8rem;height:.8rem;border-radius:50%}
.swatch.deepcore{background:var(--deep)} .swatch.core{background:var(--core)} .swatch.colonies{background:var(--colon)} .swatch.inner{background:var(--inner)}
.swatch.exp{background:var(--exp)} .swatch.mid{background:var(--mid)} .swatch.outer{background:var(--outer)} .swatch.unk{background:var(--unk)}
#coords{position:absolute;top:8px;right:10px;color:#b8c9ea;font-size:.85rem}

#routesBar{position:absolute;right:10px;bottom:10px;display:flex;flex-wrap:wrap;gap:.4rem;max-width:min(42vw,520px)}
#routesBar .routeTag{padding:.2rem .5rem;border:1px solid #2f5498;border-radius:.5rem;background:rgba(10,25,60,.6);cursor:pointer}
#routesBar .routeTag.active{box-shadow:0 0 0 1px #aee6ff;}

#overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;background:linear-gradient(180deg,transparent,transparent);}
#overlay.error{background:linear-gradient(180deg,rgba(180,30,30,.08),rgba(180,30,30,.1));}
#ovText{padding:.4rem .6rem;border:1px solid #224a92;background:rgba(10,25,60,.65);border-radius:.5rem}

aside{width:320px;max-width:92vw;border-left:1px solid #13336f;background:linear-gradient(180deg,#0a1f4f,#091940)}
aside[hidden]{display:none}
aside .head{display:flex;justify-content:space-between;align-items:center;padding:.6rem .8rem;border-bottom:1px solid #13336f}
#list{list-style:none;margin:0;padding:.4rem;max-height:calc(100vh - 120px);overflow:auto}
#list li{padding:.45rem .6rem;border:1px solid transparent;border-radius:.4rem;display:grid;grid-template-columns:1fr auto;gap:.5rem;align-items:center;cursor:pointer}
#list li small{color:#9fb0d5}
#list li:hover{background:#0f2a62;border-color:#173a76}

dialog{max-width:min(680px,94vw);border:0;background:transparent;padding:0}
.datapad{background:linear-gradient(180deg,#0b1e53,#091945);border:1px solid #1d3e7c;border-radius:12px;box-shadow:0 0 0 1px #3aa3ff40,0 0 28px #3aa3ff25;overflow:hidden;color:var(--ink)}
.dHead{display:flex;justify-content:space-between;align-items:center;padding:.7rem .8rem;background:linear-gradient(180deg,#102a68,#0b1f4f);border-bottom:1px solid #16386f}
.dHead .aure{opacity:.6;font-size:.62rem;letter-spacing:.3em}
.dHead h3{margin:.1rem 0 0}
.tag{margin-left:.6rem;font-size:.72rem;padding:.1rem .45rem;border-radius:.6rem;border:1px solid #3a66b9;background:rgba(28,56,120,.6)}
.dBody{padding:.8rem .9rem;display:grid;gap:.7rem;max-height:min(70vh,560px);overflow:auto}
.meta{display:grid;grid-template-columns:repeat(2,1fr);gap:.6rem}
blockquote{margin:0;padding:.6rem .8rem;border-left:3px solid var(--glow);background:rgba(30,50,90,.45);border-radius:6px;font-style:italic}
.notes{opacity:.95}
.routes .rHead{font-weight:700;margin-bottom:.25rem}
.routes ul{margin:0;padding-left:1rem}
.famous span:first-child{opacity:.8}

footer{display:flex;justify-content:space-between;align-items:center;gap:1rem;padding:.5rem .8rem;border-top:1px solid #0f2a62;background:#081a3f;color:#a9bce6}

@media (max-width: 960px){
  main{grid-template-columns:1fr}
  aside{position:fixed;right:0;top:56px;bottom:0;z-index:10}
  #map{height:calc(100vh - 56px - 42px)}
}
